<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My song</title>
    <Link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/daisyui@2.33.0/dist/full.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>

</head>
<body>
    <!-- 그리드로 레이아웃 만들기 -->
    <div id="main-container" class="h-screen grid grid-cols-4 grid-rows-12 gap-2 flex justify-center">
        <!-- 노래 검색창 -->
        <div class="box col-span-4 row-span-1 align-middle">
            <div class="navbar bg-amber-400">
                <div class="flex-1">
                  <a class="btn-ghost normal-case text-xl font-bold">MANGO</a>
                </div>
                <div class="flex-none gap-2">
                  <div class="form-control">
                    <input type="text" placeholder="Search" class="input input-bordered" />
                  </div>
                  <div class="dropdown dropdown-end">
                    <label tabindex="0" class="btn-ghost btn-circle avatar">
                      <div class="w-10 rounded-full">
                        <img src="https://placeimg.com/80/80/people" />
                      </div>
                    </label>
                    <ul tabindex="0" class="mt-3 p-2 shadow menu menu-compact dropdown-content bg-base-100 rounded-box w-52">
                      <li>
                        <a class="justify-between">
                          Profile
                          <span class="badge">New</span>
                        </a>
                      </li>
                      <li><a>Settings</a></li>
                      <li><a>Logout</a></li>
                    </ul>
                  </div>
                </div>
              </div>
              
        </div>
        <!-- 현재 플레이리스트 -->
        <div class="box col-span-2 row-span-4">
            <!-- 플레이리스트 -->
            <div class="btn-group btn-group-vertical w-3/5 my-5 mr-3 ml-10 float" id="songbox">
                <button class="btn" id="song1">듣고 싶을까</button>
                <button class="btn" id="song2">사건의 지평선</button>
                <button class="btn" id="song3">NXDE</button>
                <button class="btn" id="song4">사랑인가봐</button>
                <button class="btn" id="song5">SNEAKERS</button>
                <button class="btn" id="song6">도깨비불</button>
                <button class="btn" id="song7">주저하는 연인들을 위해</button>
                <button class="btn" id="song8">Permission to Dance</button>
                <button class="btn" id="song9">strawberry moon</button>
                <button class="btn" id="song10">Forever1</button>
            </div>

            <div class="btn-group btn-group-vertical w-1/4 mt-3 float bg-slate-700 rounded-lg" id="numbers">
                <button class="btn-primary h-12 rounded-lg" id="number1">0</button>
                <button class="btn-primary h-12" id="number2">0</button>
                <button class="btn-primary h-12" id="number3">0</button>
                <button class="btn-primary h-12" id="number4">0</button>
                <button class="btn-primary h-12" id="number5">0</button>
                <button class="btn-primary h-12" id="number6">0</button>
                <button class="btn-primary h-12" id="number7">0</button>
                <button class="btn-primary h-12" id="number8">0</button>
                <button class="btn-primary h-12" id="number9">0</button>
                <button class="btn-primary h-12 rounded-lg" id="number10">0</button>
            </div>

            <!-- 현재 듣고 있는 곡 -->
            <div class="px-10 w-full" id="nowplaying">
                <p class="bg-white w-full text-xl font-serif font-bold">현재 플레이 중인 곡이 없습니다.</p>
            </div>
        </div>
        <!-- 노래 플레이한 횟수 올리고 그에 따라 나의 노래 순위 TOP3 정하기 -->
        <div class="box col-span-1 row-span-4">
            <div class="mt-10 mx-3 p-1 bg-slate-700 rounded">
                <p class="songlevel m-2 mx-auto w-full h-10 rounded text-lg text-white text-center">My Song TOP3</p>
                <p class="top3 songlevel m-2 mx-auto bg-white w-full h-10 rounded text-lg font-serif font-bold text-center">없음</p>
                <p class="top3 songlevel m-2 mx-auto bg-white w-full h-10 rounded text-lg font-serif font-bold text-center">없음</p>
                <p class="top3 songlevel m-2 mx-auto bg-white w-full h-10 rounded text-lg font-serif font-bold text-center">없음</p>
            </div>

        </div>
        <div class="box col-span-1 row-span-4">
            <div class="advertisement text-center m-5">
                <h1 class="animate-bounce text-2xl font-extrabold mb-5 text-rose-600">NEW ALBUMS</h1>
                <img class="rounded-lg" src="https://images.unsplash.com/photo-1614613535308-eb5fbd3d2c17?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80">
            </div>
            <div class="overflow-scroll p-1">
                <table class="table table-zebra w-full max-h-40">
                  <!-- head -->
                  <thead>
                    <tr>
                      <th></th>
                      <th>Artist</th>
                      <th>Title</th>
                    </tr>
                  </thead>
                  <tbody>
                    <!-- row 1 -->
                    <tr>
                      <th>1</th>
                      <td>Cy Ganderton</td>
                      <td>Quality Control Specialist</td>

                    </tr>
                    <!-- row 2 -->
                    <tr>
                      <th>2</th>
                      <td>Hart Hagerty</td>
                      <td>Desktop Support Technician</td>

                    </tr>
                    <!-- row 3 -->
                    <tr>
                      <th>3</th>
                      <td>Brice Swyre</td>
                      <td>Tax Accountant</td>
                    </tr>

                    <tr>
                        <th>4</th>
                        <td>Tarlor Swift</td>
                        <td>MAX</td>
                      </tr>
                  </tbody>
                </table>
            </div>
        </div>
        <div class="box col-span-4 row-span-2">
            <footer class="footer footer-center p-10 bg-amber-400 text-base-content rounded">
                <div class="grid grid-flow-col gap-4 text-black">
                  <a class="link link-hover">About us</a> 
                  <a class="link link-hover">Contact</a> 
                  <a class="link link-hover">Jobs</a> 
                  <a class="link link-hover">Press kit</a>
                </div> 
                <div>
                  <div class="grid grid-flow-col gap-4 text-black">
                    <a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="fill-current"><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"></path></svg></a> 
                    <a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="fill-current"><path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"></path></svg></a> 
                    <a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="fill-current"><path d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"></path></svg></a>
                  </div>
                </div> 
                <div>
                  <p class="text-black">Copyright © 2022 - All right reserved by ACME Industries Ltd</p>
                </div>
            </footer>
        </div>
    </div>
    
    <script>
        var currentmenu;
        const btnlist = document.querySelectorAll(".btn");  
        const playing = document.getElementById("nowplaying");
        const top3list = document.querySelectorAll(".top3");
        const numberlist = document.querySelectorAll(".btn-primary");
      
        // 1. playlist의 곡 클릭하면 클릭한 곡의 border 바꾸기 & 플레이리스트의 현재 듣는 곡 바꾸기
       
        // 문자에서 숫자만 추출하는 정규식. 2-2에서 사용
        const regex = /[^0-9]/g;

        function clickbtn(){
            if(currentmenu){
                currentmenu.classList.remove('border-rose-500', 'border-4');
            }
            this.classList.add("border-rose-500", "border-4");
            currentmenu = this;
            playing.innerText = currentmenu.innerText;
        }

        // 2. 각 곡의 플레이 횟수를 버튼에 저장하기
        

        function countnumbers(){
            var result = currentmenu.id.replace(regex, "");
            var number = document.getElementById("number"+String(result));
            number.innerHTML = Number(number.innerHTML) + 1;

        }

        // 3. 곡의 플레이 횟수에 따라 top3 list 바꾸기

        function toplist(){
            // 곡의 플레이 횟수를 배열에 넣기
            var arr = [];
            for(let i=0;i<numberlist.length;i++){
                arr.push(numberlist[i].innerHTML);              
            }

            console.log(arr);
            // 배열이 새로 생성될 때마다 top1, 2, 3를 뽑아서 top3 list에 곡 이름 넣기. 
            // 횟수가 같을 때는 플레이리스트에서 더 앞에 있는 곡이 먼저 top3 리스트에 들어간다.
            for(let i=0;i<3;i++){
                var max = arr.reduce(function(a, b) {
                return Math.max(a, b);
                })
                var top1_index = arr.indexOf(String(max));
                top3list[i].innerHTML = btnlist[top1_index].innerHTML;
                arr[top1_index] = 0; 
            }
        }

        // 함수가 실행되는 조건
        for(let i=0; i<btnlist.length;i++){
            btnlist[i].addEventListener('click', clickbtn);
            // 궁금한 점: 왜 maketoplist를 위에 쉼표 찍고 넣으면 안될까?
            // 궁금한 점: 하나의 동작에 이렇게 많은 함수 넣어도 괜찮은건가?
            btnlist[i].addEventListener('click', countnumbers);
            btnlist[i].addEventListener('click', toplist);
        }

    </script> 

</body>
</html>